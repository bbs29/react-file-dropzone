(this["webpackJsonpreact-file-dropzone"]=this["webpackJsonpreact-file-dropzone"]||[]).push([[0],{19:function(e,t,a){e.exports=a(47)},24:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),s=(a(24),a(2)),o=a.n(s),i=a(6),u=a(3),m=a(5),d=(a(26),a(27),function(e){var t=n.useRef(),a=n.useState(!1),r=Object(m.a)(a,2),c=r[0],l=r[1];return n.createElement("div",{className:"dropzone-wrapper ".concat(e.className," ").concat(e.disabled?"disabled":"")},n.createElement("div",{className:"w-100 dropzone p-2 rounded d-flex flex-column justify-content-center align-items-center ".concat(c?"highlight":""),onDragOver:function(t){t.preventDefault(),e.disabled||l(!0)},onDragLeave:function(e){e.preventDefault(),l(!1)},onDrop:function(t){if(t.preventDefault(),!e.disabled){if(t.dataTransfer&&t.dataTransfer.files)return e.onFilesAdded(Array.from(t.dataTransfer.files)),void l(!1);e.onFilesAdded([]),l(!1)}}},n.createElement("input",{ref:function(e){return t=e},className:"d-none",type:"file",accept:e.accept?e.accept:"",multiple:!!e.multiple,onChange:function(t){t.preventDefault(),e.disabled||(t.target&&t.target.files?e.onFilesAdded(Array.from(t.target.files)):e.onFilesAdded([]))}}),n.createElement("span",{className:"pt-1"},n.createElement("i",{className:"material-icons"},"cloud_upload")),n.createElement("p",{className:"mb-0 pb-0"},"Drag and drop"),n.createElement("p",{className:"mb-1"},"or"),n.createElement("button",{type:"button",className:"btn btn-secondary w-25 mb-1",disabled:e.disabled,onClick:function(){e.disabled||t&&t.click()},style:{cursor:e.disabled?"default":"pointer"}},"Upload"),e.validationMessages&&e.validationMessages.length?e.validationMessages.map((function(e,t){return n.createElement("small",{className:"pb-1",key:t},e)})):null))}),f=(a(28),function(e){return r.a.createElement("div",{className:"progress-bar-container w-100 rounded"},r.a.createElement("div",{className:"progress h-100 m-0 rounded",style:{width:"".concat(e.progress,"%")}}))}),p=a(18),b=a.n(p).a.create({baseURL:"".concat("https://react-file-upload-service.herokuapp.com/")}),v=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);a(n,t.name)}},(r=new FormData).append("file",t,t.name),e.abrupt("return",b.post("upload",r,n));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var E=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),s=Object(m.a)(l,2),p=s[0],b=s[1],E=function(e,t){var n=Object(u.a)(a),r=n.findIndex((function(e){return e.file.name===t}));-1!==r&&(n[r].uploadProgress=100,n[r].status="Complete"),c(n)},g=function(e,t){switch(e.status){case"Complete":return r.a.createElement("span",null,r.a.createElement("i",{style:{color:"#28a745"},className:"material-icons"},"check_circle"));case"Fail":return r.a.createElement("span",null,r.a.createElement("i",{style:{color:"#ff0000bf"},className:"material-icons"},"error"));case"Progress":return r.a.createElement("div",{className:"w-25"},r.a.createElement(f,{progress:e.uploadProgress}));case"None":return r.a.createElement("span",{style:{cursor:p?"not-allowed":"pointer"},onClick:function(){return function(e){var t=Object(u.a)(a);t.splice(e,1),c(t)}(t)}},r.a.createElement("i",{className:"material-icons"},"delete"))}};return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col d-flex flex-column align-items-center"},r.a.createElement("h1",{className:"mt-4 mb-4 p-2"},"File upload and dropzone"),r.a.createElement("section",{className:"w-50 mt-2 mb-4"},r.a.createElement(d,{disabled:p,multiple:!0,onFilesAdded:function(e){var t=e.map((function(e){return{file:e,status:"None",uploadProgress:0}}));c(function(e){var t=[];return e.map((function(e){return t.some((function(t){return t.file.name===e.file.name}))||t.push(e),e})),t}([].concat(Object(u.a)(a),Object(u.a)(t))))}})),r.a.createElement("section",{className:"w-50 d-flex flex-column "},a.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pt-2 pb-2 mb-3 border",style:{maxHeight:"200px",overflowY:"auto"}},a.map((function(e,t){return r.a.createElement("div",{className:"p-1 pl-2 pr-2 d-flex justify-content-between align-items-center",key:t},r.a.createElement("span",{className:"d-inline-block text-truncate",style:{maxWidth:"300px"}},e.file.name),g(e,t))}))),r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement("button",{type:"button",disabled:p,className:"btn btn-danger w-25",onClick:function(){c([])}},"Reset"),r.a.createElement("button",{type:"button",disabled:p,className:"btn btn-success w-25",onClick:function(){try{b(!0);var e=a.filter((function(e){return"None"===e.status}));Promise.allSettled(e.map(function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t.file,E);case 2:return n=e.sent,e.abrupt("return",{response:n,file:t});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())).then((function(e){var t=Object(u.a)(a);e.map((function(e){if("fulfilled"===e.status){var a=t.findIndex((function(t){return t.file.name===e.value.file.file.name}));-1!==a&&(t[a].uploadProgress=100,t[a].status="Complete")}return null})),c(t)})),b(!1)}catch(t){}}},"Submit"))):null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(46);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.31a5f4ba.chunk.js.map